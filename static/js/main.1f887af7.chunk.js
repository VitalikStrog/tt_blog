(this.webpackJsonptt_blog=this.webpackJsonptt_blog||[]).push([[0],{107:function(t,e,n){},108:function(t,e,n){},109:function(t,e,n){},119:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(23),i=n.n(c),o=(n(107),n(108),n(109),n(165)),s=n(166),u=n(167),d=n(176),l=n(168),j=n(169),b=n(48),p=function(){return Object(b.b)()},f=b.c,h=n(22),O=n.n(h),x=n(43),m=n(29),v=n(28),g="https://bloggy-api.herokuapp.com";function y(t){return fetch("".concat(g,"/posts"),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(Object(v.a)({},t))}).then((function(t){return t.json()})).then((function(t){return t}))}function C(t){return fetch("".concat(g,"/posts/").concat(t),{method:"DELETE"}).then((function(t){return t.json()})).then((function(t){return t}))}var k=Object(m.b)("postsList/loadPosts",Object(x.a)(O.a.mark((function t(){var e;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(g,"/posts")).then((function(t){return t.json()})).then((function(t){return t}));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))),S=Object(m.b)("postsList/createPost",function(){var t=Object(x.a)(O.a.mark((function t(e){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),w=Object(m.b)("postsList/deletePost",function(){var t=Object(x.a)(O.a.mark((function t(e){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),P=Object(m.b)("postsList/updatePost",function(){var t=Object(x.a)(O.a.mark((function t(e){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a=e.postId,r=e.updatedPost,fetch("".concat(g,"/posts/").concat(a),{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(Object(v.a)({},r))}).then((function(t){return t.json()})).then((function(t){return t}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}var a,r}),t)})));return function(e){return t.apply(this,arguments)}}()),E=Object(m.b)("postsList/createComment",function(){var t=Object(x.a)(O.a.mark((function t(e){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a=e,fetch("".concat(g,"/comments"),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(Object(v.a)({},a))}).then((function(t){return t.json()}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()),L=Object(m.c)({name:"postsList",initialState:{postsList:[],selectedPostId:0,update:0},reducers:{changePost:function(t,e){t.selectedPostId=e.payload},setUpdate:function(t){t.update=Math.random()}},extraReducers:function(t){t.addCase(k.fulfilled,(function(t,e){t.postsList=e.payload})).addCase(w.fulfilled,(function(t){t.update=Math.random()})).addCase(S.fulfilled,(function(t){t.update=Math.random()})).addCase(E.fulfilled,(function(t){t.update=Math.random()})).addCase(P.fulfilled,(function(t){t.update=Math.random()}))}}),T=L.actions,N=T.changePost,I=(T.setUpdate,function(t){return t.posts.postsList}),M=function(t){return t.posts.selectedPostId},V=function(t){return t.posts.update},U=L.reducer,F=n(2),q=function(t){var e=t.post,n=p(),a=f(M);return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)(o.a,{sx:{minWidth:350},children:[Object(F.jsx)(d.a,{onClick:function(){e.id!==a?n(N(e.id)):n(N(0))},children:Object(F.jsxs)(s.a,{sx:{minHeight:100},children:[Object(F.jsx)(u.a,{gutterBottom:!0,variant:"h5",component:"div",children:"Post #".concat(e.id)}),Object(F.jsx)(u.a,{variant:"body2",color:"text.secondary",children:e.title})]})}),Object(F.jsx)(l.a,{children:Object(F.jsx)(j.a,{size:"small",color:"primary",onClick:function(){n(w(e.id))},children:"Delete"})})]})})},H=function(){var t=f(I),e=f(V),n=p();return Object(a.useEffect)((function(){n(k())}),[e]),Object(F.jsx)("div",{className:"postsList",children:t.map((function(t){return Object(F.jsx)(q,{post:t},t.id)}))})},J=n(13),D=n(84),A=n(4),B=n(173),R=n(174),W=n(163),_=n(170),z=n(34),G=n(86),K=n.n(G),Q=n(171),X=n(160),Y=n(172),Z=n(159),$=n(85),tt=n.n($),et=function(t){var e=t.titleValue,n=t.bodyValue,r=Object(a.useState)(e),c=Object(J.a)(r,2),i=c[0],o=c[1],s=Object(a.useState)(n),u=Object(J.a)(s,2),d=u[0],l=u[1],b=Object(a.useState)(!1),h=Object(J.a)(b,2),O=h[0],x=h[1],m=f(M),v=function(){return x(!1)},g=p();return Object(F.jsxs)("div",{children:[Object(F.jsx)(_.a,{"aria-label":"settings",onClick:function(){return x(!0)},children:Object(F.jsx)(tt.a,{})}),Object(F.jsx)(X.a,{sx:{maxWidth:400,maxHeight:300,position:"fixed",top:50,margin:"0 auto"},open:O,onClose:v,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(F.jsxs)(Q.a,{component:"form",sx:{display:"flex",flexDirection:"column",alignItems:"center",borderRadius:3,bgcolor:"#eee",padding:2,"& .MuiTextField-root":{m:1,width:380}},noValidate:!0,autoComplete:"off",children:[Object(F.jsx)(Z.a,{required:!0,id:"outlined-basic",label:"Edit title",variant:"outlined",defaultValue:e,onChange:function(t){return o(t.target.value)}}),Object(F.jsx)(Z.a,{required:!0,id:"outlined-basic",label:"Edit post's content",variant:"outlined",defaultValue:n,onChange:function(t){return l(t.target.value)}}),Object(F.jsxs)(Y.a,{variant:"contained","aria-label":"outlined primary button group",children:[Object(F.jsx)(j.a,{onClick:v,children:"Cancel"}),Object(F.jsx)(j.a,{onClick:function(){g(P({postId:m,updatedPost:{title:i||e,body:d||n}})),g(N(0)),v(),o(""),l("")},children:"Update"})]})]})})]})},nt=n(164),at=function(){var t=Object(a.useState)(null),e=Object(J.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)(""),i=Object(J.a)(c,2),o=i[0],s=i[1],u=f(M),d=p(),l=function(){r(null)},b=Boolean(n),h=b?"simple-popover":void 0;return Object(F.jsxs)("div",{children:[Object(F.jsx)(j.a,{"aria-describedby":h,variant:"contained",onClick:function(t){r(t.currentTarget)},children:"Add comment"}),Object(F.jsxs)(nt.a,{id:h,open:b,anchorEl:n,onClose:l,anchorOrigin:{vertical:"bottom",horizontal:"left"},sx:{padding:5},children:[Object(F.jsx)(Z.a,{required:!0,id:"filled-basic",label:"Type comment",variant:"outlined",value:o,onChange:function(t){return s(t.target.value)}}),Object(F.jsxs)(Y.a,{variant:"contained","aria-label":"outlined primary button group",sx:{height:56},children:[Object(F.jsx)(j.a,{onClick:l,children:"Cancel"}),Object(F.jsx)(j.a,{onClick:function(){d(E({postId:u,body:o})),l()},children:"Add"})]})]})]})},rt=["expand"],ct=Object(A.a)((function(t){t.expand;var e=Object(D.a)(t,rt);return Object(F.jsx)(_.a,Object(v.a)({},e))}))((function(t){var e=t.theme;return{transform:t.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})}})),it=function(){var t=a.useState(!1),e=Object(J.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)({id:0,title:"",body:"",comments:[]}),i=Object(J.a)(c,2),d=i[0],j=i[1],b=f(M),p=f(V);return Object(a.useEffect)((function(){r(!1),function(t){return fetch("".concat(g,"/posts/").concat(t,"?_embed=comments")).then((function(t){return t.json()})).then((function(t){return t}))}(b).then((function(t){return j(t)}))}),[b,p]),Object(F.jsxs)(o.a,{sx:{width:400,minHeight:224},children:[Object(F.jsx)(B.a,{avatar:Object(F.jsx)(W.a,{sx:{bgcolor:z.a[500]},"aria-label":"recipe",children:d.id}),action:Object(F.jsx)(et,{titleValue:d.title,bodyValue:d.body}),title:d.title}),Object(F.jsx)(s.a,{sx:{minHeight:60},children:Object(F.jsx)(u.a,{variant:"body2",color:"text.secondary",children:d.body})}),Object(F.jsxs)(l.a,{disableSpacing:!0,children:[Object(F.jsx)(at,{}),Object(F.jsx)(ct,{disabled:0===d.comments.length,expand:n,onClick:function(){r(!n)},"aria-expanded":n,"aria-label":"show more",children:Object(F.jsx)(K.a,{})})]}),Object(F.jsx)(R.a,{in:n,timeout:"auto",unmountOnExit:!0,children:Object(F.jsxs)(s.a,{children:[Object(F.jsx)(u.a,{paragraph:!0,children:"Comments:"}),Object(F.jsx)(u.a,{paragraph:!0,children:d.comments.map((function(t){return Object(F.jsx)("li",{children:t.body},t.id)}))})]})})]})},ot=function(){var t=Object(a.useState)(""),e=Object(J.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)(""),i=Object(J.a)(c,2),o=i[0],s=i[1],u=Object(a.useState)(!1),d=Object(J.a)(u,2),l=d[0],b=d[1],f=function(){return b(!1)},h=p();return Object(F.jsxs)("div",{children:[Object(F.jsx)(j.a,{onClick:function(){return b(!0)},children:"Create post"}),Object(F.jsx)(X.a,{sx:{maxWidth:400,maxHeight:300,position:"fixed",top:50,margin:"0 auto"},open:l,onClose:f,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(F.jsxs)(Q.a,{onSubmit:function(){h(S({title:n,body:o})),f(),r(""),s("")},component:"form",sx:{display:"flex",flexDirection:"column",alignItems:"center",borderRadius:3,bgcolor:"#eee",padding:2,"& .MuiTextField-root":{m:1,width:380}},noValidate:!0,autoComplete:"off",children:[Object(F.jsx)(Z.a,{required:!0,id:"outlined-basic",label:"Enter title",variant:"outlined",value:n,onChange:function(t){return r(t.target.value)}}),Object(F.jsx)(Z.a,{required:!0,id:"outlined-basic",label:"Enter post's content",variant:"outlined",value:o,onChange:function(t){return s(t.target.value)}}),Object(F.jsxs)(Y.a,{variant:"contained","aria-label":"outlined primary button group",children:[Object(F.jsx)(j.a,{onClick:f,children:"Cancel"}),Object(F.jsx)(j.a,{type:"submit",children:"Create"})]})]})})]})},st=function(){var t=f(M);return Object(F.jsx)("div",{className:"App",children:Object(F.jsxs)("main",{className:"main-content",children:[Object(F.jsxs)("div",{className:"group",children:[Object(F.jsx)(ot,{}),Object(F.jsx)("div",{className:"sidebar",children:Object(F.jsx)(H,{})})]}),Object(F.jsx)("div",{className:"content",children:t?Object(F.jsx)(it,{}):Object(F.jsx)("div",{className:"selection-message",children:"Click on post to select"})})]})})},ut=Object(m.a)({reducer:{posts:U}});i.a.render(Object(F.jsx)(r.a.StrictMode,{children:Object(F.jsx)(b.a,{store:ut,children:Object(F.jsx)(st,{})})}),document.getElementById("root"))}},[[119,1,2]]]);
//# sourceMappingURL=main.1f887af7.chunk.js.map